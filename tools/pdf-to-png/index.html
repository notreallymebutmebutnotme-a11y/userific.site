<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF to PNG Converter â€“ Free, High Quality Online Tool | Userific</title>
  <meta name="description" content="Convert PDF to PNG free online. Fast, high-quality PDF to image conversion. Extract pages from PDF as PNG images without uploading to a server.">
  <meta name="keywords" content="pdf to png, pdf to image, convert pdf to png, online pdf to png converter, free pdf image converter, high quality pdf to png, pdf page to png">
  <meta name="robots" content="index, follow">
  <link rel="stylesheet" href="../../assets/css/base.css">
  <style>
    header {display:flex;justify-content:space-between;align-items:center;padding:16px 24px;}
    header h1 {margin:0;font-size:1.6rem;}
    header h1 a {text-decoration:none;color:inherit;}
    .tagline{font-size:0.9rem;opacity:0.8;}
    .toggle-dark{cursor:pointer;font-size:1.4rem;user-select:none;}
    .toggle-dark:hover{text-decoration:none;}
    .container{max-width:900px;margin:0 auto;padding:20px;}
    .controls {display:flex;gap:12px;flex-wrap:wrap;margin:15px 0;}
    input[type=file], input[type=number], input[type=text] {padding:8px;border-radius:8px;border:1px solid #ccc;font-size:1rem;}
    button {padding:10px 16px;border-radius:8px;border:0;background:#007bff;color:#fff;font-weight:600;cursor:pointer;}
    button:disabled {opacity:.45;cursor:not-allowed;}
    .page-list{margin-top:12px;display:grid;gap:12px;}
    .page-item{display:flex;gap:12px;align-items:center;}
    canvas{border-radius:6px;box-shadow:0 6px 18px rgba(0,0,0,0.06);max-width:220px}
    .meta{font-size:13px}
    .small{font-size:13px;color:#444}
    a.link{display:inline-block;padding:6px 8px;background:#eef4ff;border-radius:6px;text-decoration:none;color:#064c9b}
    footer{text-align:center;font-size:0.9rem;margin-top:40px;}
    footer a{margin:0 10px;color:inherit;text-decoration:none;}
    footer a:hover{text-decoration:underline;}
    .ad-box{margin:20px 0;padding:12px;text-align:center;border:1px dashed #ccc;border-radius:12px;color:#888;font-size:0.9rem;}
    body.dark-mode {background:#111;color:#eee;}
    body.dark-mode .ad-box{border-color:#555;color:#aaa;}
  </style>
</head>
<body>
  <header>
    <div>
      <h1><a href="/">Userific</a></h1>
      <div class="tagline">Useful tools built just for you âœ¨</div>
    </div>
    <div class="toggle-dark" onclick="toggleDarkMode()">ðŸŒ—</div>
  </header>

  <div class="container">
    <h2>PDF to PNG Converter â€“ Free & High Quality</h2>
    <p class="small">Convert PDF files into high-resolution PNG images. 100% client-side, no server upload required.</p>

    <div class="ad-box">Ads will show here</div>

    <div class="controls">
      <input id="file" type="file" accept="application/pdf" />
      <label>Scale: <input id="scale" type="number" value="2" min="0.5" step="0.5" style="width:80px;margin-left:6px" /></label>
      <label>Pages: <input id="pages" type="text" placeholder="e.g. 1-3,5" style="width:160px;margin-left:6px" /></label>
      <button id="convert">Convert</button>
      <button id="downloadAll" disabled>Download All (ZIP)</button>
    </div>

    <div class="ad-box">Ads will show here</div>

    <div id="status" class="small"></div>
    <div id="pagesContainer" class="page-list"></div>

    <p class="small"><strong>Tip:</strong> Leave the <em>Pages</em> field empty to convert the entire PDF. Increasing the scale (e.g., 2â€“4) will produce sharper images but may require more memory and processing time.</p>

    <div class="ad-box">Ads will show here</div>
  </div>

  <footer>
    <p>&copy; <span id="year"></span> Userific.xyz â€“ All Rights Reserved</p>
    <p><a href="/privacy.html">Privacy Policy</a> | <a href="/terms.html">Terms</a> | <a href="/contact.html">Contact</a></p>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';

    const fileInput = document.getElementById('file');
    const scaleInput = document.getElementById('scale');
    const convertBtn = document.getElementById('convert');
    const pagesContainer = document.getElementById('pagesContainer');
    const status = document.getElementById('status');
    const pagesText = document.getElementById('pages');
    const downloadAllBtn = document.getElementById('downloadAll');

    let currentImages = [];

    function parsePageSelection(str, maxPage) {
      if (!str) return Array.from({length: maxPage}, (_,i)=>i+1);
      const parts = str.split(',').map(s=>s.trim()).filter(Boolean);
      const set = new Set();
      for (const p of parts) {
        if (p.includes('-')) {
          const [a,b] = p.split('-').map(Number);
          if (Number.isFinite(a) && Number.isFinite(b)) {
            for (let i=Math.max(1,a); i<=Math.min(b,maxPage); i++) set.add(i);
          }
        } else {
          const n = Number(p);
          if (Number.isFinite(n) && n>=1 && n<=maxPage) set.add(n);
        }
      }
      return Array.from(set).sort((a,b)=>a-b);
    }

    convertBtn.addEventListener('click', async ()=>{
      const file = fileInput.files && fileInput.files[0];
      if (!file) { alert('Please pick a PDF file.'); return; }

      convertBtn.disabled = true;
      downloadAllBtn.disabled = true;
      pagesContainer.innerHTML = '';
      currentImages = [];
      status.textContent = 'Loading PDF...';

      const arrayBuffer = await file.arrayBuffer();
      const loadingTask = pdfjsLib.getDocument({data: arrayBuffer});
      try {
        const pdf = await loadingTask.promise;
        const numPages = pdf.numPages;
        const pageList = parsePageSelection(pagesText.value, numPages);
        if (pageList.length === 0) { alert('No pages selected or invalid range.'); convertBtn.disabled=false; status.textContent=''; return; }

        status.textContent = `Rendering ${pageList.length} page(s)...`;
        const scale = Math.max(0.5, Number(scaleInput.value) || 2);

        for (const pageNum of pageList) {
          status.textContent = `Rendering page ${pageNum} of ${numPages}...`;
          const page = await pdf.getPage(pageNum);
          const viewport = page.getViewport({scale: 1});
          const canvas = document.createElement('canvas');
          const context = canvas.getContext('2d');
          canvas.width = Math.floor(viewport.width * scale);
          canvas.height = Math.floor(viewport.height * scale);
          const renderContext = {canvasContext: context, viewport: page.getViewport({scale})};
          await page.render(renderContext).promise;

          const dataUrl = canvas.toDataURL('image/png');
          const blob = (await (await fetch(dataUrl)).blob());
          const fileName = `${file.name.replace(/\.pdf$/i,'')}_page_${String(pageNum).padStart(3,'0')}.png`;

          const item = document.createElement('div');
          item.className = 'page-item';
          const thumb = document.createElement('canvas');
          const tctx = thumb.getContext('2d');
          const maxPreview = 220;
          const ratio = canvas.width / canvas.height;
          thumb.width = Math.min(maxPreview, canvas.width);
          thumb.height = Math.round(thumb.width / ratio);
          tctx.drawImage(canvas, 0, 0, thumb.width, thumb.height);
          const meta = document.createElement('div');
          meta.className = 'meta';
          meta.innerHTML = `<div><strong>Page ${pageNum}</strong></div><div class="small">${canvas.width} Ã— ${canvas.height} px</div>`;
          const dl = document.createElement('a');
          dl.className = 'link';
          dl.textContent = 'Download PNG';
          dl.href = URL.createObjectURL(blob);
          dl.download = fileName;
          item.appendChild(thumb);
          item.appendChild(meta);
          item.appendChild(dl);
          pagesContainer.appendChild(item);
          currentImages.push({name: fileName, blob});
          await new Promise(r => setTimeout(r, 60));
        }
        status.textContent = `Done â€” ${currentImages.length} image(s) ready.`;
        if (currentImages.length) downloadAllBtn.disabled = false;
      } catch (err) {
        console.error(err);
        alert('Failed to read PDF: ' + (err.message || err));
        status.textContent = '';
      } finally {
        convertBtn.disabled = false;
      }
    });

    downloadAllBtn.addEventListener('click', async ()=>{
      if (!currentImages.length) return;
      downloadAllBtn.disabled = true;
      status.textContent = 'Creating ZIP...';
      const zip = new JSZip();
      for (const img of currentImages) { zip.file(img.name, img.blob); }
      const content = await zip.generateAsync({type:'blob'});
      saveAs(content, 'images.zip');
      status.textContent = 'ZIP downloaded.';
      downloadAllBtn.disabled = false;
    });

    function toggleDarkMode(){document.body.classList.toggle('dark-mode');localStorage.setItem('darkMode',document.body.classList.contains('dark-mode'));}
    function initDarkMode(){if(localStorage.getItem('darkMode')==='true')document.body.classList.add('dark-mode');}
    document.getElementById('year').textContent=new Date().getFullYear();
    initDarkMode();
  </script>
</body>
</html>